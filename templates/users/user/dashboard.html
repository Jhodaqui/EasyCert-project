{% extends "base.html" %}
{% load static %}
{% block content %}

<div class="constancia-container">
  <div class="constancia-card">
    <h2 class="constancia-title">BIENVENIDO AL SISTEMA DE GENERACION DE CONSTANCIAS</h2>
    <p class="constancia-subtitle">Solicita tu Constancia aquí!!</p>

    <form method="post" id="constanciaForm" class="constancia-form">
      {% csrf_token %}
      {{ form.non_field_errors }}

      <div class="form-group">
        {{ form.nombre_completo }}
        {{ form.nombre_completo.errors }}
      </div>
      <div class="form-group">
        {{ form.numero_documento }}
        {{ form.numero_documento.errors }}
      </div>
      <div class="form-group">
        {{ form.tipo_documento }}
        {{ form.tipo_documento.errors }}
      </div>
      <div class="form-group">
        {{ form.email }}
        {{ form.email.errors }}
      </div>
      <div class="form-group">
        {{ form.fecha_inicial }}
        {{ form.fecha_inicial.errors }}
      </div>
      <div class="form-group">
        {{ form.fecha_final }}
        {{ form.fecha_final.errors }}
      </div>
      <div class="form-group">
        {{ form.tipo_constancia }}
        {{ form.tipo_constancia.errors }}
      </div>

      <button type="submit" class="btn-submit">Solicitar</button>
      <a href="{% url 'login' %}" class="btn-ingresar">Ingresar</a>
    </form>
  </div>

  <!-- Logo arriba a la derecha -->
  <div class="constancia-logo">
    <img src="{% static 'img/EasyCert.jpg' %}" alt="Logo EasyCert">
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="confirmModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content p-4 text-center">
      <div class="modal-body">
        <h5>Tu solicitud ha sido enviada</h5>
        <p>Verifica tu información, si tienes alguna duda corrobora tus datos</p>
        <a href="{% url 'user_dashboard' %}" class="btn btn-success">Aceptar</a>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    {% if form_valido %}
      var modalEl = document.getElementById("confirmModal");
      var modal = new bootstrap.Modal(modalEl);
      modal.show();
    {% endif %}
  });
</script>

{% endblock %}
